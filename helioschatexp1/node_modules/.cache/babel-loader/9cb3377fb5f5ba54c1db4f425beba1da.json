{"ast":null,"code":"import _classCallCheck from \"/Users/goutham/Desktop/helioschatexp/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/goutham/Desktop/helioschatexp/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/goutham/Desktop/helioschatexp/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/goutham/Desktop/helioschatexp/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/goutham/Desktop/helioschatexp/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/Users/goutham/Desktop/helioschatexp/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/Users/goutham/Desktop/helioschatexp/src/chats/TreeMap.js\";\nimport React, { Component } from 'react';\nimport * as d3 from 'd3';\nvar w = 1280 - 80,\n    h = 800 - 180,\n    x = d3.scale.linear().range([0, w]),\n    y = d3.scale.linear().range([0, h]),\n    color = d3.scale.category20c();\n\nvar TreeMap =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(TreeMap, _Component);\n\n  function TreeMap(props) {\n    var _this;\n\n    _classCallCheck(this, TreeMap);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(TreeMap).call(this, props));\n    _this.myRef = React.createRef();\n    _this.createForceLayout = _this.createForceLayout.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(TreeMap, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.createForceLayout();\n    }\n  }, {\n    key: \"createForceLayout\",\n    value: function createForceLayout() {\n      var node, root;\n      d3.json(\"party_asset.json\").then(function (data) {\n        node = root = data;\n        console.log(data);\n        var nodes = treemap.nodes(root).filter(function (d) {\n          return !d.children;\n        });\n        var cell = svg.selectAll(\"g\").data(nodes).enter().append(\"svg:g\").attr(\"class\", \"cell\").attr(\"transform\", function (d) {\n          return \"translate(\" + d.x + \",\" + d.y + \")\";\n        }).on(\"click\", function (d) {\n          return zoom(node == d.parent ? root : d.parent);\n        });\n        cell.append(\"svg:rect\").attr(\"width\", function (d) {\n          return d.dx - 1;\n        }).attr(\"height\", function (d) {\n          return d.dy - 1;\n        }).style(\"fill\", function (d) {\n          return color(d.parent.name);\n        });\n        cell.append(\"svg:text\").attr(\"x\", function (d) {\n          return d.dx / 2;\n        }).attr(\"y\", function (d) {\n          return d.dy / 2;\n        }).attr(\"dy\", \".35em\").attr(\"text-anchor\", \"middle\").text(function (d) {\n          return d.name;\n        }).style(\"opacity\", function (d) {\n          d.w = this.getComputedTextLength();\n          return d.dx > d.w ? 1 : 0;\n        });\n        d3.select(window).on(\"click\", function () {\n          zoom(root);\n        });\n        d3.select(\"select\").on(\"change\", function () {\n          //treemap.value(this.value == \"size\" ? size : count).nodes(root);\n          treemap.value(this.value == \"total\" ? total : this.value == \"building\" ? building : this.value == \"ground\" ? ground : cash).nodes(root);\n          zoom(node);\n        });\n      });\n\n      function size(d) {\n        return d.size;\n      }\n\n      function total(d) {\n        return d.total;\n      }\n\n      function building(d) {\n        return d.building;\n      }\n\n      function ground(d) {\n        return d.ground;\n      }\n\n      function cash(d) {\n        return d.cash;\n      }\n\n      function count(d) {\n        return 1;\n      }\n\n      function zoom(d) {\n        var kx = w / d.dx,\n            ky = h / d.dy;\n        x.domain([d.x, d.x + d.dx]);\n        y.domain([d.y, d.y + d.dy]);\n        var t = svg.selectAll(\"g.cell\").transition().duration(d3.event.altKey ? 7500 : 750).attr(\"transform\", function (d) {\n          return \"translate(\" + x(d.x) + \",\" + y(d.y) + \")\";\n        });\n        t.select(\"rect\").attr(\"width\", function (d) {\n          return kx * d.dx - 1;\n        }).attr(\"height\", function (d) {\n          return ky * d.dy - 1;\n        });\n        t.select(\"text\").attr(\"x\", function (d) {\n          return kx * d.dx / 2;\n        }).attr(\"y\", function (d) {\n          return ky * d.dy / 2;\n        }).style(\"opacity\", function (d) {\n          return kx * d.dx > d.w ? 1 : 0;\n        });\n        node = d;\n        d3.event.stopPropagation();\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(\"div\", {\n        className: \"container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 108\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 109\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        id: \"chart-area\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 110\n        },\n        __self: this\n      })));\n    }\n  }]);\n\n  return TreeMap;\n}(Component);\n\nexport default TreeMap;","map":{"version":3,"sources":["/Users/goutham/Desktop/helioschatexp/src/chats/TreeMap.js"],"names":["React","Component","d3","w","h","x","scale","linear","range","y","color","category20c","TreeMap","props","myRef","createRef","createForceLayout","bind","node","root","json","then","data","console","log","nodes","treemap","filter","d","children","cell","svg","selectAll","enter","append","attr","on","zoom","parent","dx","dy","style","name","text","getComputedTextLength","select","window","value","total","building","ground","cash","size","count","kx","ky","domain","t","transition","duration","event","altKey","stopPropagation"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport * as d3 from 'd3';\n\nconst w = 1280 - 80,\n    h = 800 - 180,\n    x = d3.scale.linear().range([0, w]),\n    y = d3.scale.linear().range([0, h]),\n    color = d3.scale.category20c();\n   \n\n\nclass TreeMap extends Component {\n\n    constructor(props) {\n        super(props);\n        this.myRef = React.createRef();\n        this.createForceLayout =  this.createForceLayout.bind(this);\n      }\n      componentDidMount() {\n        this.createForceLayout();\n      }\n      createForceLayout() {\n        let node,root;\n\n        d3.json(\"party_asset.json\").then(function(data) {\n            node = root = data;\n            console.log(data);\n            var nodes = treemap.nodes(root)\n                .filter(function(d) {return !d.children; });\n          \n            var cell = svg.selectAll(\"g\")\n                .data(nodes)\n              .enter().append(\"svg:g\")\n                .attr(\"class\", \"cell\")\n                .attr(\"transform\", function(d) { return \"translate(\" + d.x + \",\" + d.y + \")\"; })\n                .on(\"click\", function(d) { return zoom(node == d.parent ? root : d.parent); });\n          \n            cell.append(\"svg:rect\")\n                .attr(\"width\", function(d) { return d.dx - 1; })\n                .attr(\"height\", function(d) { return d.dy - 1; })\n                .style(\"fill\", function(d) {return color(d.parent.name); });\n          \n            cell.append(\"svg:text\")\n                .attr(\"x\", function(d) { return d.dx / 2; })\n                .attr(\"y\", function(d) { return d.dy / 2; })\n                .attr(\"dy\", \".35em\")\n                .attr(\"text-anchor\", \"middle\")\n                .text(function(d) { return d.name; })\n                .style(\"opacity\", function(d) { d.w = this.getComputedTextLength(); return d.dx > d.w ? 1 : 0; });\n          \n            d3.select(window).on(\"click\", function() { zoom(root); });\n          \n            d3.select(\"select\").on(\"change\", function() {\n              //treemap.value(this.value == \"size\" ? size : count).nodes(root);\n              treemap.value((this.value == \"total\") ? total : (this.value == \"building\") ? building : (this.value == \"ground\") ? ground : cash).nodes(root);\n              zoom(node);\n            });\n          });\n          \n          function size(d) {\n            return d.size;\n          }\n          \n          function total(d) {\n            return d.total;\n          }\n          \n          function building(d) {\n            return d.building;\n          }\n          \n          function ground(d) {\n            return d.ground;\n          }\n          \n          function cash(d) {\n            return d.cash;\n          }\n          \n          function count(d) {\n            return 1;\n          }\n          \n          function zoom(d) {\n            var kx = w / d.dx, ky = h / d.dy;\n            x.domain([d.x, d.x + d.dx]);\n            y.domain([d.y, d.y + d.dy]);\n          \n            var t = svg.selectAll(\"g.cell\").transition()\n                .duration(d3.event.altKey ? 7500 : 750)\n                .attr(\"transform\", function(d) { return \"translate(\" + x(d.x) + \",\" + y(d.y) + \")\"; });\n          \n            t.select(\"rect\")\n                .attr(\"width\", function(d) { return kx * d.dx - 1; })\n                .attr(\"height\", function(d) { return ky * d.dy - 1; })\n          \n            t.select(\"text\")\n                .attr(\"x\", function(d) { return kx * d.dx / 2; })\n                .attr(\"y\", function(d) { return ky * d.dy / 2; })\n                .style(\"opacity\", function(d) { return kx * d.dx > d.w ? 1 : 0; });\n          \n            node = d;\n            d3.event.stopPropagation();\n          }\n      }\n      render() {\n        return (\n            <div className=\"container\">\n            <div className=\"row\">\n                <div id=\"chart-area\"></div>\n            </div>\n        </div>\n        );\n    }\n\n}\n\nexport default TreeMap;"]},"metadata":{},"sourceType":"module"}