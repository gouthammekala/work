{"ast":null,"code":"import _classCallCheck from \"/Users/goutham/Desktop/helioschatexp/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/goutham/Desktop/helioschatexp/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/goutham/Desktop/helioschatexp/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/goutham/Desktop/helioschatexp/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/goutham/Desktop/helioschatexp/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/Users/goutham/Desktop/helioschatexp/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/Users/goutham/Desktop/helioschatexp/src/chats/CalenderView.js\";\nimport React, { Component } from \"react\";\nimport * as d3 from \"d3\";\nimport filepath from \"./file1.csv\";\nvar margin = {\n  left: 80,\n  right: 20,\n  top: 50,\n  bottom: 100\n};\nvar width = 600 - margin.left - margin.right,\n    height = 400 - margin.top - margin.bottom;\n\nvar CalenderView =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(CalenderView, _Component);\n\n  function CalenderView(props) {\n    var _this;\n\n    _classCallCheck(this, CalenderView);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(CalenderView).call(this, props));\n    _this.createForceLayout = _this.createForceLayout.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(CalenderView, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.createForceLayout();\n    }\n  }, {\n    key: \"createForceLayout\",\n    value: function createForceLayout() {\n      var weekday = 'weekday';\n      var cellSize = 17;\n      var timeWeek = weekday === \"sunday\" ? d3.utcSunday : d3.utcMonday;\n      var countDay = weekday === \"sunday\" ? function (d) {\n        return new Date(d).getUTCDay();\n      } : function (d) {\n        return (new Date(d).getUTCDay() + 6) % 7;\n      };\n      var format = d3.format(\"+.2%\");\n      var formatDate = d3.utcFormat(\"%x\");\n\n      var formatDay = function formatDay(d) {\n        return \"SMTWTFS\"[new Date(d).getUTCDay()];\n      };\n\n      var formatMonth = d3.utcFormat(\"%b\");\n      var color = d3.scaleSequential(d3.interpolatePiYG).domain([-0.05, 0.05]);\n\n      function pathMonth(t) {\n        var n = weekday === \"weekday\" ? 5 : 7;\n        var d = Math.max(0, Math.min(n, countDay(t)));\n        var w = timeWeek.count(d3.utcYear(t), t);\n        return \"\".concat(d === 0 ? \"M\".concat(w * cellSize, \",0\") : d === n ? \"M\".concat((w + 1) * cellSize, \",0\") : \"M\".concat((w + 1) * cellSize, \",0V\").concat(d * cellSize, \"H\").concat(w * cellSize), \"V\").concat(n * cellSize);\n      }\n\n      d3.csv(\"https://gist.githubusercontent.com/mbostock/354a9c93174a17eb6b80f4678e3d3ae9/raw/9d20ec96a40cc3fd5b8ddc9a306bd7397d5cfd16/dji.csv\").then(function (tdata, error) {\n        //console.log(tdata);\n        tdata.forEach(function (d) {\n          d.open = +d.open;\n          d.close = +d.close;\n          d.low = +d.low;\n          d.high = +d.high;\n          d.volume = +d.volume;\n        });\n        var data = tdata.map(function (da) {\n          return {\n            value: (da.close - da.open) / da.open,\n            date: da.date\n          };\n        }); // console.log(data);\n\n        var years = d3.nest().key(function (d) {\n          // console.log(new Date(d.date).getUTCFullYear());\n          return new Date(d.date).getUTCFullYear();\n        }).entries(data).reverse();\n        var svg = d3.select(\"#chart-area\").append(\"svg\").attr(\"width\", width + margin.left + margin.right).attr(\"height\", height + margin.top + margin.bottom).style(\"font\", \"10px sans-serif\").append(\"g\").attr(\"transform\", \"translate(\" + margin.left + \", \" + margin.top + \")\");\n        var year = svg.selectAll(\"g\").data(years).join(\"g\").attr(\"transform\", function (d, i) {\n          return \"translate(40,\".concat(height * i + cellSize * 1.5, \")\");\n        });\n        year.append(\"text\").attr(\"x\", -5).attr(\"y\", -5).attr(\"font-weight\", \"bold\").attr(\"text-anchor\", \"end\").text(function (d) {\n          return d.key;\n        });\n        year.append(\"g\").attr(\"text-anchor\", \"end\").selectAll(\"text\").data((weekday === \"weekday\" ? d3.range(2, 7) : d3.range(7)).map(function (i) {\n          return new Date(1995, 0, i);\n        })).join(\"text\").attr(\"x\", -5).attr(\"y\", function (d) {\n          // console.log(d);\n          return (countDay(d) + 0.5) * cellSize;\n        }).attr(\"dy\", \"0.31em\").text(formatDay);\n        year.append(\"g\").selectAll(\"rect\").data(function (d) {\n          return d.values;\n        }).join(\"rect\").attr(\"width\", cellSize - 1).attr(\"height\", cellSize - 1).attr(\"x\", function (d) {\n          console.log(d3.timeWeek.count(d3.utcYear(d.date), d.date));\n          return d3.timeWeek.count(d3.utcYear(d.date), d.date) * cellSize + 0.5;\n        }).attr(\"y\", function (d) {\n          return countDay(d.date) * cellSize + 0.5;\n        }).attr(\"fill\", function (d) {\n          return color(d.value);\n        }).append(\"title\").text(function (d) {\n          return \"\".concat(formatDate(d.date), \": \").concat(format(d.value));\n        });\n        var month = year.append(\"g\").selectAll(\"g\").data(function (d) {\n          return d3.utcMonths(d3.utcMonth(d.values[0].date), d.values[d.values.length - 1].date);\n        }).join(\"g\");\n        month.filter(function (d, i) {\n          return i;\n        }).append(\"path\").attr(\"fill\", \"none\").attr(\"stroke\", \"#fff\").attr(\"stroke-width\", 3).attr(\"d\", pathMonth);\n        month.append(\"text\").attr(\"x\", function (d) {\n          return timeWeek.count(d3.utcYear(d), timeWeek.ceil(d)) * cellSize + 2;\n        }).attr(\"y\", -5).text(formatMonth);\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(\"div\", {\n        className: \"container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 162\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 163\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        id: \"chart-area\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 164\n        },\n        __self: this\n      })));\n    }\n  }]);\n\n  return CalenderView;\n}(Component);\n\nexport default CalenderView;","map":{"version":3,"sources":["/Users/goutham/Desktop/helioschatexp/src/chats/CalenderView.js"],"names":["React","Component","d3","filepath","margin","left","right","top","bottom","width","height","CalenderView","props","createForceLayout","bind","weekday","cellSize","timeWeek","utcSunday","utcMonday","countDay","d","Date","getUTCDay","format","formatDate","utcFormat","formatDay","formatMonth","color","scaleSequential","interpolatePiYG","domain","pathMonth","t","n","Math","max","min","w","count","utcYear","csv","then","tdata","error","forEach","open","close","low","high","volume","data","map","da","value","date","years","nest","key","getUTCFullYear","entries","reverse","svg","select","append","attr","style","year","selectAll","join","i","text","range","values","console","log","month","utcMonths","utcMonth","length","filter","ceil"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport * as d3 from \"d3\";\nimport filepath from \"./file1.csv\";\nconst margin = { left:80, right:20, top:50, bottom:100 };\n\nconst width = 600 - margin.left - margin.right,\n    height = 400 - margin.top - margin.bottom;\nclass CalenderView extends Component {\n  constructor(props) {\n    super(props);\n    this.createForceLayout = this.createForceLayout.bind(this);\n  }\n  componentDidMount() {\n    this.createForceLayout();\n  }\n  createForceLayout() {\n    const weekday ='weekday';\n    const cellSize = 17;\n    const timeWeek = weekday === \"sunday\" ? d3.utcSunday : d3.utcMonday;\n    const countDay = weekday === \"sunday\" ? d => new Date(d).getUTCDay() : d => (new Date(d).getUTCDay() + 6) % 7;\n    const format = d3.format(\"+.2%\")\n    const formatDate = d3.utcFormat(\"%x\");\n    const formatDay = d => \"SMTWTFS\"[new Date(d).getUTCDay()];\n    const formatMonth = d3.utcFormat(\"%b\");\n    const color = d3.scaleSequential(d3.interpolatePiYG).domain([-0.05, 0.05]);\n    function pathMonth(t) {\n        const n = weekday === \"weekday\" ? 5 : 7;\n        const d = Math.max(0, Math.min(n, countDay(t)));\n        const w = timeWeek.count(d3.utcYear(t), t);\n        return `${d === 0 ? `M${w * cellSize},0`\n            : d === n ? `M${(w + 1) * cellSize},0`\n            : `M${(w + 1) * cellSize},0V${d * cellSize}H${w * cellSize}`}V${n * cellSize}`;\n      }\n\n    d3.csv(\n      \"https://gist.githubusercontent.com/mbostock/354a9c93174a17eb6b80f4678e3d3ae9/raw/9d20ec96a40cc3fd5b8ddc9a306bd7397d5cfd16/dji.csv\"\n    ).then(function(tdata, error) {\n        //console.log(tdata);\n        tdata.forEach(function(d) {\n            d.open = +d.open;\n            d.close = +d.close;\n            d.low=+d.low;\n            d.high=+d.high;\n            d.volume=+d.volume;\n        });\n        let data = tdata.map((da)=>{ \n\n            return {\n  \n                value: (da.close - da.open) / da.open,\n                date:da.date,\n            };\n          \n        });\n       // console.log(data);\n    \n        const years = d3\n            .nest()\n            .key(d => {\n                // console.log(new Date(d.date).getUTCFullYear());\n                return new Date(d.date).getUTCFullYear()\n            })\n            .entries(data)\n            .reverse();\n\n      const svg = d3.select(\"#chart-area\")\n      .append(\"svg\")\n      .attr(\"width\", width + margin.left + margin.right)\n      .attr(\"height\", height + margin.top + margin.bottom)\n        .style(\"font\", \"10px sans-serif\")\n        .append(\"g\")\n        .attr(\"transform\", \"translate(\" + margin.left + \", \" + margin.top + \")\");\n\n\n      const year = svg\n        .selectAll(\"g\")\n        .data(years)\n        .join(\"g\")\n        .attr(\n          \"transform\",\n          (d, i) => `translate(40,${height * i + cellSize * 1.5})`\n        );\n\n      year\n        .append(\"text\")\n        .attr(\"x\", -5)\n        .attr(\"y\", -5)\n        .attr(\"font-weight\", \"bold\")\n        .attr(\"text-anchor\", \"end\")\n        .text(d => d.key);\n\n      year\n        .append(\"g\")\n        .attr(\"text-anchor\", \"end\")\n        .selectAll(\"text\")\n        .data(\n          (weekday === \"weekday\" ? d3.range(2, 7) : d3.range(7)).map(\n            i => new Date(1995, 0, i)\n          )\n        )\n        .join(\"text\")\n        .attr(\"x\", -5)\n        .attr(\"y\", d => {\n            // console.log(d);\n            return (countDay(d) + 0.5) * cellSize\n        })\n        .attr(\"dy\", \"0.31em\")\n        .text(formatDay);\n\n      year\n        .append(\"g\")\n        .selectAll(\"rect\")\n        .data(d => d.values)\n        .join(\"rect\")\n        .attr(\"width\", cellSize - 1)\n        .attr(\"height\", cellSize - 1)\n        .attr(\n          \"x\",\n          d => {\n              console.log(d3.timeWeek.count(d3.utcYear(d.date), d.date));\n              return d3.timeWeek.count(d3.utcYear(d.date), d.date) * cellSize + 0.5\n            }\n        )\n        .attr(\"y\", d => countDay(d.date) * cellSize + 0.5)\n        .attr(\"fill\", d => color(d.value))\n        .append(\"title\")\n        .text(d => `${formatDate(d.date)}: ${format(d.value)}`);\n\n      const month = year\n        .append(\"g\")\n        .selectAll(\"g\")\n        .data(d =>\n          d3.utcMonths(\n            d3.utcMonth(d.values[0].date),\n            d.values[d.values.length - 1].date\n          )\n        )\n        .join(\"g\");\n\n      month\n        .filter((d, i) => i)\n        .append(\"path\")\n        .attr(\"fill\", \"none\")\n        .attr(\"stroke\", \"#fff\")\n        .attr(\"stroke-width\", 3)\n        .attr(\"d\", pathMonth);\n\n      month\n        .append(\"text\")\n        .attr(\n          \"x\",\n          d => timeWeek.count(d3.utcYear(d), timeWeek.ceil(d)) * cellSize + 2\n        )\n        .attr(\"y\", -5)\n        .text(formatMonth);\n        \n    });\n  }\n\n  render() {\n    return (\n      <div className=\"container\">\n        <div className=\"row\">\n          <div id=\"chart-area\" />\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default CalenderView;\n"]},"metadata":{},"sourceType":"module"}